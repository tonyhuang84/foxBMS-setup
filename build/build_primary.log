[ 42/114] Compiling embedded-software\mcu-common\src\module\ltc\ltc.c

['arm-none-eabi-gcc.exe', '-mcpu=cortex-m4', '-mthumb', '-mlittle-endian', '-mfloat-abi=softfp', '-mfpu=fpv4-sp-d16', '-fmessage-length=0', '-fno-common', '-fsigned-char', '-ffunction-sections', '-fdata-sections', '-ffreestanding', '-fno-move-loop-invariants', '-Wall', '-std=c99', '-DBUILD_VERSION="1.0"', '-DBUILD_APPNAME="foxbms"', '-DDEBUG', '-DUSE_FULL_ASSERT', '-DTRACE', '-DOS_USE_TRACE_ITM', '-DUSE_HAL_DRIVER', '-DHSE_VALUE=8000000', '-O2', '-I.', '-I..\\..\\embedded-software\\mcu-freertos\\Source', '-I..\\..\\embedded-software\\mcu-freertos\\Source\\CMSIS_RTOS', '-I..\\..\\embedded-software\\mcu-freertos\\Source\\include', '-I..\\..\\embedded-software\\mcu-freertos\\Source\\portable\\GCC\\ARM_CM4F', '-I..\\..\\embedded-software\\mcu-hal\\CMSIS\\Device\\ST\\STM32F4xx\\Include', '-I..\\..\\embedded-software\\mcu-hal\\CMSIS\\Include', '-I..\\..\\embedded-software\\mcu-hal\\STM32F4xx_HAL_Driver\\Inc', '-I..\\..\\embedded-software\\mcu-hal\\STM32F4xx_HAL_Driver\\Inc\\Legacy.', '-I..\\..\\embedded-software\\mcu-primary\\src\\application\\config', '-I..\\..\\embedded-software\\mcu-primary\\src\\application\\sox', '-I..\\..\\embedded-software\\mcu-primary\\src\\engine\\config', '-Iembedded-software\\mcu-common\\src\\engine\\database', '-I..\\..\\embedded-software\\mcu-common\\src\\engine\\database', '-I..\\..\\embedded-software\\mcu-primary\\src\\engine\\diag', '-I..\\..\\embedded-software\\mcu-primary\\src\\engine\\sys', '-I..\\..\\embedded-software\\mcu-primary\\src\\general', '-I..\\..\\embedded-software\\mcu-primary\\src\\general\\config', '-I..\\..\\embedded-software\\mcu-primary\\src\\general\\config\\STM32F4xx', '-I..\\..\\embedded-software\\mcu-primary\\src\\general\\includes', '-Iembedded-software\\mcu-common\\src\\module\\adc', '-I..\\..\\embedded-software\\mcu-common\\src\\module\\adc', '-Iembedded-software\\mcu-common\\src\\module\\can', '-I..\\..\\embedded-software\\mcu-common\\src\\module\\can', '-Iembedded-software\\mcu-common\\src\\module\\cansignal', '-I..\\..\\embedded-software\\mcu-common\\src\\module\\cansignal', '-Iembedded-software\\mcu-common\\src\\module\\chksum', '-I..\\..\\embedded-software\\mcu-common\\src\\module\\chksum', '-Iembedded-software\\mcu-common\\src\\module\\dma', '-I..\\..\\embedded-software\\mcu-common\\src\\module\\dma', '-Iembedded-software\\mcu-common\\src\\module\\io', '-I..\\..\\embedded-software\\mcu-common\\src\\module\\io', '-Iembedded-software\\mcu-common\\src\\module\\meas', '-I..\\..\\embedded-software\\mcu-common\\src\\module\\meas', '-Iembedded-software\\mcu-common\\src\\module\\ltc', '-I..\\..\\embedded-software\\mcu-common\\src\\module\\ltc', '-Iembedded-software\\mcu-common\\src\\module\\mcu', '-I..\\..\\embedded-software\\mcu-common\\src\\module\\mcu', '-Iembedded-software\\mcu-common\\src\\module\\rcc', '-I..\\..\\embedded-software\\mcu-common\\src\\module\\rcc', '-Iembedded-software\\mcu-common\\src\\module\\rtc', '-I..\\..\\embedded-software\\mcu-common\\src\\module\\rtc', '-Iembedded-software\\mcu-common\\src\\module\\spi', '-I..\\..\\embedded-software\\mcu-common\\src\\module\\spi', '-Iembedded-software\\mcu-common\\src\\module\\uart', '-I..\\..\\embedded-software\\mcu-common\\src\\module\\uart', '-Iembedded-software\\mcu-common\\src\\module\\utils', '-I..\\..\\embedded-software\\mcu-common\\src\\module\\utils', '-I..\\..\\embedded-software\\mcu-primary\\src\\module\\config', '-I..\\..\\embedded-software\\mcu-primary\\src\\module\\contactor', '-I..\\..\\embedded-software\\mcu-primary\\src\\module\\nvram', '-I..\\..\\embedded-software\\mcu-primary\\src\\module\\intermcu', '-I..\\..\\embedded-software\\mcu-primary\\src\\module\\isoguard', '-I..\\..\\embedded-software\\mcu-primary\\src\\module\\timer', '-I..\\..\\embedded-software\\mcu-primary\\src\\os', '..\\..\\embedded-software\\mcu-common\\src\\module\\ltc\\ltc.c', '-c', '-oD:\\itri\\foxBMS\\src\\foxBMS-setup\\build\\primary\\embedded-software\\mcu-common\\src\\module\\ltc\\ltc.c.1.o']
err: ..\..\embedded-software\mcu-common\src\module\ltc\ltc.c: In function 'LTC_EBM_SetColState':
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c:434:3: warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing]
   uint8_t oldState = *((uint16_t *)(&LTC_GPIOVoltages[modNo*6*2 + gpioNo*2])) > 40000 ? 1:0; // ref. #55; 1:Non-Protecting(=enable), 0:Protection(=bypass)
   ^
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c:428:10: warning: unused variable 'oldState' [-Wunused-variable]
  uint8_t oldState = 0;
          ^
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c: In function 'LTC_EBM_SetEBColState':
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c:513:32: warning: unused variable 'gpio4' [-Wunused-variable]
  uint8_t gpio1 = 1, gpio2 = 1, gpio4 = 1;
                                ^
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c:513:21: warning: unused variable 'gpio2' [-Wunused-variable]
  uint8_t gpio1 = 1, gpio2 = 1, gpio4 = 1;
                     ^
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c:513:10: warning: unused variable 'gpio1' [-Wunused-variable]
  uint8_t gpio1 = 1, gpio2 = 1, gpio4 = 1;
          ^
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c: In function 'LTC_SaveAllGPIOs':
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c:651:9: warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing]
         LTC_allGPIOVoltages[i] = (uint16_t)(((float)(*((uint16_t *)(&LTC_GPIOVoltages[2*i]))))*100e-6*1000.0);
         ^
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c: In function 'LTC_SaveVoltages':
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c:710:4: warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing]
    ltc_ebm_cali[i].curBat_offset += (*((int16_t *)(&LTC_CellVoltages[2*LTC_EBM_BAT_CURR_IDX+i*LTC_NUMBER_OF_LTC_PER_MODULE*2*BS_NR_OF_BAT_CELLS_PER_MODULE])) - LTC_EBM_CURR_ZERO_BASE);
    ^
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c:711:4: warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing]
    ltc_ebm_cali[i].curMod_offset += (*((int16_t *)(&LTC_CellVoltages[2*LTC_EBM_MOD_CURR_IDX+i*LTC_NUMBER_OF_LTC_PER_MODULE*2*BS_NR_OF_BAT_CELLS_PER_MODULE])) - LTC_EBM_CURR_ZERO_BASE);
    ^
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c:726:10: warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing]
          val_ui = *((uint16_t *)(&LTC_CellVoltages[2*j+i*LTC_NUMBER_OF_LTC_PER_MODULE*BS_NR_OF_BAT_CELLS_PER_MODULE*2]));        // raw values
          ^
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c: In function 'LTC_SaveTemperatures':
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c:848:21: warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing]
                     val_ui =*((uint16_t *)(&LTC_MultiplexerVoltages[2*((LTC_NUMBER_OF_LTC_PER_MODULE*i*LTC_N_MUX_CHANNELS_PER_LTC)+muxseqptr->muxID*LTC_N_MUX_CHANNELS_PER_MUX+muxseqptr->muxCh)]));  // raw values, all mux on all LTCs
                     ^
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c:870:25: warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing]
                         val_ui =*((uint16_t *)(&LTC_MultiplexerVoltages[2*(LTC_NUMBER_OF_LTC_PER_MODULE*i*LTC_N_MUX_CHANNELS_PER_LTC+muxseqptr->muxID*LTC_N_MUX_CHANNELS_PER_MUX+muxseqptr->muxCh)]));        // raw values, all mux on all LTCs
                         ^
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c:916:4: warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing]
    ltc_celltemperature.temperature[i*(BS_NR_OF_TEMP_SENSORS_PER_MODULE)+j+6] = *((int16_t *)(&LTC_GPIOVoltages[i*6*2 + j*2]));
    ^
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c: In function 'get_LTC_allGPIOVoltages':
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c:4767:14: warning: format '%u' expects argument of type 'unsigned int', but argument 3 has type '__uint32_t' [-Wformat=]
              *((uint16_t *)(&LTC_allGPIOVoltages[modIdx*6 + 5])));
              ^
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c: In function 'get_LTC_CellVoltages':
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c:4835:6: warning: format '%u' expects argument of type 'unsigned int', but argument 3 has type '__uint32_t' [-Wformat=]
      ltc_cellvoltage.voltage[modIdx*(BS_NR_OF_BAT_CELLS_PER_MODULE)+6]);
      ^
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c: In function 'ltc_task_ALLGPIOMEASUREMEN':
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c:4862:3: warning: implicit declaration of function 'memset' [-Wimplicit-function-declaration]
   memset(LTC_GPIOVoltages, 0x00, sizeof(LTC_GPIOVoltages));
   ^
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c: In function 'LTC_Set_Get_Property':
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c:4905:3: warning: implicit declaration of function 'strcmp' [-Wimplicit-function-declaration]
   if (strcmp(prop, ltc_props[i].prop) == 0) {
   ^
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c: In function 'LTC_BalanceControl':
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c:3641:44: warning: iteration 2u invokes undefined behavior [-Waggressive-loop-optimizations]
             if (ltc_balancing_control.value[j*(BS_NR_OF_BAT_CELLS_PER_MODULE)+11] == 1) {
                                            ^
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c:3596:9: note: containing loop
         for (j=0; j < BS_NR_OF_MODULES; j++) {
         ^
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c:3666:44: warning: iteration 2u invokes undefined behavior [-Waggressive-loop-optimizations]
             if (ltc_balancing_control.value[j*(BS_NR_OF_BAT_CELLS_PER_MODULE)+14] == 1) {
                                            ^
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c:3648:9: note: containing loop
         for (j=0; j < BS_NR_OF_MODULES; j++) {
         ^
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c: In function 'LTC_Trigger':
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c:2196:54: warning: array subscript is above array bounds [-Warray-bounds]
                         ltc_user_io_control.value_out[3] = tmp;
                                                      ^
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c:2197:54: warning: array subscript is above array bounds [-Warray-bounds]
                         ltc_user_io_control.value_out[4] = tmp;
                                                      ^
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c:2198:54: warning: array subscript is above array bounds [-Warray-bounds]
                         ltc_user_io_control.value_out[5] = tmp;
                                                      ^
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c:2199:54: warning: array subscript is above array bounds [-Warray-bounds]
                         ltc_user_io_control.value_out[6] = tmp;
                                                      ^
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c:2200:54: warning: array subscript is above array bounds [-Warray-bounds]
                         ltc_user_io_control.value_out[7] = tmp;
                                                      ^
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c:2209:54: warning: array subscript is above array bounds [-Warray-bounds]
                         ltc_user_io_control.value_out[3] = tmp;
                                                      ^
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c:2210:54: warning: array subscript is above array bounds [-Warray-bounds]
                         ltc_user_io_control.value_out[4] = tmp;
                                                      ^
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c:2211:54: warning: array subscript is above array bounds [-Warray-bounds]
                         ltc_user_io_control.value_out[5] = tmp;
                                                      ^
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c:2212:54: warning: array subscript is above array bounds [-Warray-bounds]
                         ltc_user_io_control.value_out[6] = tmp;
                                                      ^
..\..\embedded-software\mcu-common\src\module\ltc\ltc.c:2213:54: warning: array subscript is above array bounds [-Warray-bounds]
                         ltc_user_io_control.value_out[7] = tmp;
                                                      ^

[109/114] Linking build\primary\embedded-software\mcu-common\src\module\libfoxbms-common-module.a

['arm-none-eabi-ar.exe', 'rcs', 'embedded-software\\mcu-common\\src\\module\\libfoxbms-common-module.a', 'embedded-software\\mcu-common\\src\\module\\adc\\adc.c.1.o', 'embedded-software\\mcu-common\\src\\module\\can\\can.c.1.o', 'embedded-software\\mcu-common\\src\\module\\cansignal\\cansignal.c.1.o', 'embedded-software\\mcu-common\\src\\module\\chksum\\chksum.c.1.o', 'embedded-software\\mcu-common\\src\\module\\dma\\dma.c.1.o', 'embedded-software\\mcu-common\\src\\module\\interlock\\interlock.c.1.o', 'embedded-software\\mcu-common\\src\\module\\io\\io.c.1.o', 'embedded-software\\mcu-common\\src\\module\\io\\portcheck.c.1.o', 'embedded-software\\mcu-common\\src\\module\\meas\\meas.c.1.o', 'embedded-software\\mcu-common\\src\\module\\ltc\\ltc.c.1.o', 'embedded-software\\mcu-common\\src\\module\\ltc\\ltc_pec.c.1.o', 'embedded-software\\mcu-common\\src\\module\\mcu\\mcu.c.1.o', 'embedded-software\\mcu-common\\src\\module\\rcc\\rcc.c.1.o', 'embedded-software\\mcu-common\\src\\module\\rtc\\rtc.c.1.o', 'embedded-software\\mcu-common\\src\\module\\rtc\\bkpsram.c.1.o', 'embedded-software\\mcu-common\\src\\module\\spi\\spi.c.1.o', 'embedded-software\\mcu-common\\src\\module\\uart\\uart.c.1.o', 'embedded-software\\mcu-common\\src\\module\\utils\\led.c.1.o', 'embedded-software\\mcu-common\\src\\module\\utils\\misc.c.1.o', 'embedded-software\\mcu-common\\src\\module\\utils\\sdram.c.1.o', 'embedded-software\\mcu-common\\src\\module\\watchdog\\wdg.c.1.o', 'embedded-software\\mcu-primary\\src\\module\\config\\dma_cfg.c.1.o', 'embedded-software\\mcu-primary\\src\\module\\config\\interlock_cfg.c.1.o', 'embedded-software\\mcu-primary\\src\\module\\config\\io_cfg.c.1.o', 'embedded-software\\mcu-primary\\src\\module\\config\\meas_cfg.c.1.o', 'embedded-software\\mcu-primary\\src\\module\\config\\ltc_cfg.c.1.o', 'embedded-software\\mcu-primary\\src\\module\\config\\rcc_cfg.c.1.o', 'embedded-software\\mcu-primary\\src\\module\\config\\rtc_cfg.c.1.o', 'embedded-software\\mcu-primary\\src\\module\\config\\can_cfg.c.1.o', 'embedded-software\\mcu-primary\\src\\module\\config\\cansignal_cfg.c.1.o', 'embedded-software\\mcu-primary\\src\\module\\config\\spi_cfg.c.1.o', 'embedded-software\\mcu-primary\\src\\module\\config\\uart_cfg.c.1.o', 'embedded-software\\mcu-primary\\src\\module\\config\\sdram_cfg.c.1.o']
[110/114] Linking build\primary\embedded-software\mcu-primary\src\general\foxbms.elf

['arm-none-eabi-g++.exe', '-mthumb', '-mlittle-endian', '-fsigned-char', '-ffreestanding', '-fno-move-loop-invariants', '-fmessage-length=0', '-fsigned-char', '-mcpu=cortex-m4', '-mfpu=fpv4-sp-d16', '-mfloat-abi=softfp', '-std=c99', '-ffunction-sections', '-fdata-sections', '-Wall', '-TD:\\itri\\foxBMS\\src\\foxBMS-setup\\embedded-software\\mcu-primary\\src\\STM32F429ZIT6_FLASH.ld', '-Wl,-Map,foxbms.map', '-Xlinker', '--gc-sections', '--specs=nosys.specs', '--specs=nano.specs', 'embedded-software\\mcu-primary\\src\\general\\config\\nvic_cfg.c.1.o', 'embedded-software\\mcu-primary\\src\\general\\config\\STM32F4xx\\stm32f4xx_hal_msp.c.1.o', 'embedded-software\\mcu-primary\\src\\general\\config\\STM32F4xx\\stm32f4xx_it.c.1.o', 'embedded-software\\mcu-primary\\src\\general\\config\\STM32F4xx\\system_stm32f4xx.c.1.o', 'embedded-software\\mcu-primary\\src\\general\\main.c.1.o', 'embedded-software\\mcu-primary\\src\\general\\nvic.c.1.o', 'embedded-software\\mcu-primary\\src\\general\\version.c.1.o', 'embedded-software\\mcu-primary\\src\\general\\config\\batterysystem_cfg.c.1.o', 'embedded-software\\mcu-primary\\src\\general\\config\\STM32F4xx\\startup_stm32f429xx.o', '-o', 'D:\\itri\\foxBMS\\src\\foxBMS-setup\\build\\primary\\embedded-software\\mcu-primary\\src\\general\\foxbms.elf', '-Wl,-Bstatic', '-Lembedded-software\\mcu-freertos', '-Lembedded-software\\mcu-common\\src\\engine', '-Lembedded-software\\mcu-primary\\src\\engine', '-Lembedded-software\\mcu-primary\\src\\application', '-Lembedded-software\\mcu-primary\\src\\module', '-Lembedded-software\\mcu-common\\src\\module', '-Lembedded-software\\mcu-hal\\STM32F4xx_HAL_Driver', '-lfoxbms-os', '-lfoxbms-common-engine', '-lfoxbms-engine', '-lfoxbms-application', '-lfoxbms-module', '-lfoxbms-common-module', '-lfoxbms-stmhal', '-Wl,-Bdynamic']
[111/114] Compiling build\primary\embedded-software\mcu-primary\src\general\foxbms.elf

['C:\\foxconda\\Library\\bin\\arm-none-eabi-objcopy.exe', '-O', 'ihex', 'embedded-software\\mcu-primary\\src\\general\\foxbms.elf', 'embedded-software\\mcu-primary\\src\\general\\foxbms.hex']
[112/114] Processing build\primary\embedded-software\mcu-primary\src\general\foxbms.elf

['python', 'D:\\itri\\foxBMS\\src\\foxBMS-setup\\tools\\checksum\\chksum.py', 'D:\\itri\\foxBMS\\src\\foxBMS-setup\\tools\\checksum\\chksum.ini', '-bd=chk5um', '-hf=embedded-software\\mcu-primary\\src\\general\\foxbms.hex']
out: ************************************************************************
* Configuration:                                                       *
* Project type:         bms                                            *
* Hex file path:        embedded-software\mcu-primary\src\general\foxbms.hex*
* Flashsize:            0x200000 (2097152)                             *
* Flash header address: 0xfff00 (1048320)                              *
* Begin address:        0xfff48 (1048392)                              *
* End address:          0xfff4c (1048396)                              *
* Checksum address:     0xfff10 (1048336)                              *
* Checksum algorithm:   crc32                                          *
* Crc polynomial:       0x04C11DB7                                     *
* 32-bit SW-Chksum:     0x6A2AFD4F                                     *
************************************************************************
* Checksum tool successful                                             *
************************************************************************

['C:\\foxconda\\python.exe', 'D:\\itri\\foxBMS\\src\\foxBMS-setup\\tools\\checksum\\writeback.py', '--conffile', 'chk5um\\chksum.log', '--elffile', 'embedded-software\\mcu-primary\\src\\general\\foxbms.elf', '--tool', 'C:\\foxconda\\Library\\bin\\arm-none-eabi-gdb.exe']
out: 
Writing checksum 0x6A2AFD4F into embedded-software\mcu-primary\src\general\foxbms.elf
C:\foxconda\Library\bin\arm-none-eabi-gdb.exe -q -se=embedded-software\mcu-primary\src\general\foxbms.elf --write -ex="set var ver_sw_validation.Checksum_u32=0x6A2AFD4F" -ex="print ver_sw_validation.Checksum_u32" -ex="quit"
Reading symbols from embedded-software\mcu-primary\src\general\foxbms.elf...(no debugging symbols found)...done.

done...
Attempt to extract a component of a value that is not a structure.
Attempt to extract a component of a value that is not a structure.


[113/114] Compiling build\primary\embedded-software\mcu-primary\src\general\foxbms.elf

['C:\\foxconda\\Library\\bin\\arm-none-eabi-objcopy.exe', '-j', '.flashheader', '-O', 'binary', 'embedded-software\\mcu-primary\\src\\general\\foxbms.elf', 'embedded-software\\mcu-primary\\src\\general\\foxbms_flashheader.bin']
[114/114] Compiling build\primary\embedded-software\mcu-primary\src\general\foxbms.elf

['C:\\foxconda\\Library\\bin\\arm-none-eabi-objcopy.exe', '-R', '.bkp_ramsect', '-R', '.flashheader', '-O', 'binary', 'embedded-software\\mcu-primary\\src\\general\\foxbms.elf', 'embedded-software\\mcu-primary\\src\\general\\foxbms_flash.bin']
